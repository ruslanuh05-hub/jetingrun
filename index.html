<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="0;url=html/index.html">
    <title>JET</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        // Telegram внедряет объект только в ПЕРВЫЙ документ. После редиректа на html/index.html
        // новый документ не получает window.Telegram. Сохраняем initData перед переходом.
        (function() {
            function go() {
                var tg = window.Telegram && window.Telegram.WebApp;
                if (tg && tg.initData) {
                    try {
                        sessionStorage.setItem('jet_tg_init_data', tg.initData || '');
                        if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
                            sessionStorage.setItem('jet_tg_user', JSON.stringify(tg.initDataUnsafe.user));
                        }
                    } catch (e) {}
                }
                window.location.href = 'html/index.html';
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', go);
            } else {
                setTimeout(go, 0);
            }
        })();
    </script>
</head>
<body>
    <p>Переход на <a href="html/index.html">главную</a>...</p>
</body>
</html>
